<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="googlebot" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="bingbot" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="slurp" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="duckduckbot" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="Baiduspider" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="YandexBot" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="GPTBot" content="noindex">
    <meta name="ChatGPT-User" content="noindex">
    <meta name="anthropic-ai" content="noindex">
    <meta name="Google-Extended" content="noindex">
    <meta name="CCBot" content="noindex">
    <meta name="PerplexityBot" content="noindex">
    <meta name="Applebot-Extended" content="noindex">
    <meta name="FacebookBot" content="noindex">
    <meta name="Claude-Web" content="noindex">
    <meta property="og:robots" content="noindex">
    <meta name="twitter:robots" content="noindex">
    <title>Case Studies - Slide Deck</title>
    <link rel="icon" type="image/png" href="./images/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Jost:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="deck-body">
    <!-- Under Construction Modal -->
    <div class="construction-modal" id="construction-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <img src="https://media.tenor.com/MRCIli40TYoAAAAj/under-construction90s-90s.gif" alt="Under Construction" class="construction-gif">
            <p class="modal-text">Figma does not allow the embedding of real apps. I've built several, including this deck presentation app that allows me to iframe the apps that I've built. If we have a portfolio presentation, I'll get rid of this modal and show you how I built new products and brought them to market using Cursor.</p>
            <button class="modal-dismiss-btn" id="modal-dismiss-btn">Okay, show me WIP</button>
        </div>
    </div>

    <div class="deck-container" id="deck-container">
        <!-- Sidebar Navigation -->
        <aside class="deck-sidebar" id="deck-sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="sidebar-logo-link">
                    <img src="images/favicon.png" alt="Jason McCoy" class="sidebar-logo">
                </a>
                <h2 class="sidebar-title">Case Studies</h2>
            </div>
            <nav class="sidebar-nav" id="sidebar-nav">
                <!-- Decks and slides will be populated by JavaScript -->
            </nav>
            <div class="sidebar-footer">
                <img src="images/deck/cursor-small.svg" alt="Cursor" class="cursor-logo">
            </div>
        </aside>

        <!-- Main Slide Area -->
        <main class="deck-main" id="deck-main">
            <div class="slide-container" id="slide-container">
                <!-- Current slide content will be rendered here -->
            </div>

            <!-- Navigation Controls -->
            <div class="deck-controls" id="deck-controls">
                <button class="control-btn prev-btn" id="prev-btn" aria-label="Previous slide">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <div class="slide-counter" id="slide-counter">
                    <span id="current-slide">1</span> / <span id="total-slides">1</span>
                </div>
                <button class="control-btn next-btn" id="next-btn" aria-label="Next slide">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <!-- Fullscreen Button -->
                <button class="fullscreen-btn" id="fullscreen-btn" aria-label="Toggle fullscreen">
                <svg class="fullscreen-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 3H5C3.89543 3 3 3.89543 3 5V8M21 8V5C21 3.89543 20.1046 3 19 3H16M16 21H19C20.1046 21 21 20.1046 21 19V16M3 16V19C3 20.1046 3.89543 21 5 21H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <svg class="exit-fullscreen-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                    <path d="M8 3V5C8 6.10457 8.89543 7 10 7H14C15.1046 7 16 6.10457 16 5V3M21 8H19C17.8954 8 17 8.89543 17 10V14C17 15.1046 17.8954 16 19 16H21M16 21V19C16 17.8954 15.1046 17 14 17H10C8.89543 17 8 17.8954 8 19V21M3 16H5C6.10457 16 7 15.1046 7 14V10C7 8.89543 6.10457 8 5 8H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            </div>
        </main>
    </div>

    <script>
        // Deck data structure
        const decks = [
            {
                id: 'intro',
                title: 'Overview',
                slides: [
                    {
                        title: 'Who is Jason',
                        content: `
                            <div class="slide-content" style="display: flex; align-items: center; justify-content: center; padding: 0; margin: 0;">
                                <img src="images/welcome.png" alt="Welcome" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                        `
                    },
                    {
                        title: 'John Hancock Financial',
                        content: `
                            <div class="slide-content" style="display: flex; align-items: center; justify-content: center; padding: 0; margin: 0;">
                                <img src="images/deck/Twine.png" alt="Twine" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                        `
                    },
                    // {
                    //     title: 'Dropbox Replay',
                    //     content: `
                    //         <div class="slide-content two-columns">
                    //             <div class="column-left">
                    //                 <h1 class="replay-title">Dropbox Replay</h1>
                    //                 <p class="replay-description">Led design from alpha→GA, reaching $2m ARR the first year after launch.</p>
                    //                 <div class="project-tags">
                    //                     <span class="project-tag">2022</span>
                    //                     <span class="project-tag">B2C</span>
                    //                     <span class="project-tag">0→1</span>
                    //                 </div>
                    //             </div>
                    //             <div class="column-right">
                    //                 <img src="images/replay-dashboard.png" alt="Dropbox Replay Dashboard" class="replay-dashboard-image">
                    //             </div>
                    //         </div>
                    //     `
                    // },
                    {
                        title: 'Pulley.com',
                        content: `
                            <div class="slide-content" style="display: flex; align-items: center; justify-content: center; padding: 0; margin: 0;">
                                <img src="images/deck/Pulley.png" alt="Pulley" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                        `
                    }
                ]
            },
            {
                id: 'dropbox-replay',
                title: 'Dropbox Replay',
                slides: [
                    {
                        title: 'Figma slides',
                        content: `
                            <div class="slide-content nerdy-slide">
                                <iframe
                                    style="width:100%;height:100%;border:0;"
                                    allowfullscreen
                                    src="https://www.figma.com/embed?embed_host=share&url=https://www.figma.com/proto/K0YaaAOtqvCgeLE9Vulmtn/Jason-McCoy?page-id=49723%3A18804&node-id=55692-26697&p=f&viewport=25259%2C6836%2C0.25&t=qK23kmNYg5ClZrSs-1&scaling=min-zoom&scaling=scale-down&content-scaling=responsive&starting-point-node-id=55692%3A26697&hide-ui=1"
                                ></iframe>
                            </div>
                        `
                    }
                ]
            },
            {
                id: 'about',
                title: 'Nerdy AI for Tutors',
                slides: [
                    {
                        title: 'Copilot alpha',
                        content: `
                            <div class="slide-content user-flow-slide copilot-alpha-slide">
                                <div class="user-flow-image-container">
                                    <img src="images/deck/nerdy-ai/1-og-nerdy-copilot-collapsed.png" alt="Copilot Alpha Step 1" class="user-flow-image nerdy-og active" data-step="1">
                                </div>
                            </div>
                        `
                    },
                    {
                        title: 'Nerdy Copilot prototype',
                        content: `
                            <div class="slide-content nerdy-slide">
                                <iframe src="https://nerdycopilot.netlify.app/" frameborder="0" allowfullscreen class="nerdy-iframe"></iframe>
                            </div>
                        `
                    },
                    {
                        title: 'Session prep prototype',
                        content: `
                            <div class="slide-content nerdy-slide">
                                <iframe src="https://nerdy-copilot.netlify.app/" frameborder="0" allowfullscreen class="nerdy-iframe"></iframe>
                            </div>
                        `
                    }
                ]
            },
            {
                id: 'portfolio',
                title: 'Tuttle for Personal Injury',
                slides: [
                    {
                        title: 'Introducing Tuttle',
                        content: `
                            <div class="slide-content two-columns">
                                <div class="column-left">
                                    <h1 class="replay-title">Tuttle</h1>
                                    <p class="replay-description">Automated records requests for personal injury practices. Increasing staff capacity, closing cases faster, and increasing firm cashflow.</p>
                                    <div class="project-tags">
                                        <span class="project-tag">2025</span>
                                        <span class="project-tag">B2B</span>
                                        <span class="project-tag">Discovery</span>
                                        <span class="project-tag">Product</span>
                                        <span class="project-tag">Design</span>
                                        <span class="project-tag">AI</span>
                                        <span class="project-tag">Sales</span>
                                    </div>
                                </div>
                                <div class="column-right">
                                    <img src="images/deck/tuttle-add-provider.png" alt="Tuttle Add Provider UI" class="tuttle-image">
                                </div>
                            </div>
                        `
                    },
                    {
                        title: 'Discovery prototype',
                        content: `
                            <div class="slide-content nerdy-slide">
                                <iframe src="https://tuttle-discovery-prototype.netlify.app/login" frameborder="0" allowfullscreen class="nerdy-iframe"></iframe>
                            </div>
                        `
                    },
                    {
                        title: 'Workflow overview',
                        content: `
                            <div class="slide-content user-flow-slide simple-request-flow-slide">
                                <div class="user-flow-image-container">
                                    <img src="images/deck/simple-request-flow/1-simplified-request-flow.png" alt="Workflow Overview Step 1" class="user-flow-image active" data-step="1">
                                </div>
                            </div>
                        `
                    },
                    {
                        title: '2100% ROI',
                        content: `
                            <div class="slide-content" style="display: flex; align-items: center; justify-content: center; padding: 0; margin: 0;">
                                <img src="images/deck/business-opportunity.png" alt="2100% ROI" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                        `
                    },
                    {
                        title: 'Meet River Run Law',
                        content: `
                            <div class="slide-content casey-slide" style="display: flex; align-items: center; justify-content: center;">
                                <img src="images/deck/casey.png" alt="Meet River Run Law" style="max-width: 100%; max-height: 100%; object-fit: contain;">
                                <img src="images/deck/tools-toast.png" alt="Tools Toast" class="tools-toast-image">
                            </div>
                        `
                    },
                    {
                        title: 'Request form',
                        content: `
                            <div class="slide-content nerdy-slide">
                                <img src="images/deck/tan-vo.png" alt="Tan Vo" class="tan-vo-overlay">
                                <iframe src="images/deck/casey-request-form.html" frameborder="0" allowfullscreen class="google-form-iframe"></iframe>
                            </div>
                        `
                    },
                    {
                        title: 'Zapier logic',
                        content: `
                            <div class="slide-content nerdy-slide">
                                <iframe src="images/deck/casey-zapier-logic.html" frameborder="0" allowfullscreen class="zapier-logic-iframe"></iframe>
                            </div>
                        `
                    },
                    {
                        title: 'The pain is real',
                        content: `
                            <div class="slide-content testimonials-slide">
                                <div class="testimonial-cards">
                                    <div class="testimonial-card">
                                        <p class="testimonial-quote">Getting the records in is a huge pain in the ass</p>
                                        <div class="testimonial-attribution">
                                            <img src="images/deck/casey-small.png" alt="Casey" class="testimonial-photo">
                                            <div class="testimonial-info">
                                                <p class="testimonial-title">Firm owner</p>
                                                <p class="testimonial-firm">River Run Law</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="testimonial-card">
                                        <p class="testimonial-quote">Medical record collection — 1,000% — a huge time suck</p>
                                        <div class="testimonial-attribution">
                                            <img src="images/deck/chris-small.png" alt="Chris" class="testimonial-photo">
                                            <div class="testimonial-info">
                                                <p class="testimonial-title">Attorney</p>
                                                <p class="testimonial-firm">Phelan & Petty</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="testimonial-card">
                                        <p class="testimonial-quote">Haha, omg, ordering bills and records is the most taxing part of my day</p>
                                        <div class="testimonial-attribution">
                                            <img src="images/deck/jacayla-small.png" alt="Jacayla" class="testimonial-photo">
                                            <div class="testimonial-info">
                                                <p class="testimonial-title">Paralegal</p>
                                                <p class="testimonial-firm">Latham & Martin</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: 'Buyers and users',
                        content: `
                            <div class="slide-content buyer-user-slide">
                                <div class="buyer-user-headings">
                                    <h2 class="buyer-user-heading">Small personal injury law firm</h2>
                                    <h2 class="buyer-user-heading full-service">Full-service law firm</h2>
                                </div>
                                <div class="buyer-user-cards">
                                    <div class="buyer-user-card-group personal-injury">
                                        <div class="buyer-user-card">
                                            <span class="buyer-user-tag buyer-tag">Buyer</span>
                                            <p class="buyer-user-text">Firm partner</p>
                                            <img src="images/deck/chris-small.png" alt="Chris" class="buyer-user-photo">
                                        </div>
                                        <div class="buyer-user-card">
                                            <span class="buyer-user-tag user-tag">User</span>
                                            <p class="buyer-user-text">Paralegal</p>
                                            <img src="images/deck/jacayla-small.png" alt="Jacayla" class="buyer-user-photo">
                                        </div>
                                        <div class="buyer-user-card">
                                            <span class="buyer-user-tag user-tag">User</span>
                                            <p class="buyer-user-text">Legal assistant</p>
                                            <img src="images/deck/tan-vo-small.png" alt="Tan Vo" class="buyer-user-photo">
                                        </div>
                                    </div>
                                    <div class="buyer-user-card-group full-service">
                                        <div class="buyer-user-card">
                                            <span class="buyer-user-tag buyer-tag">Buyer</span>
                                            <p class="buyer-user-text">Attorney</p>
                                            <img src="images/deck/ryan-ash.png" alt="Ryan" class="buyer-user-photo">
                                        </div>
                                    </div>
                                </div>
                                <div class="buyer-user-footer">
                                    <div class="buyer-user-green-line"></div>
                                    <p class="buyer-user-footer-text">Minimal training, no standardized workflows</p>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: 'Legal workflows',
                        content: `
                            <div class="slide-content" style="display: flex; align-items: center; justify-content: center;">
                                <img src="images/deck/figjam-workflows.png" alt="FigJam Workflows" class="figjam-workflows-image">
                            </div>
                        `
                    },
                    {
                        title: 'Requests workflow',
                        content: `
                            <div class="slide-content user-flow-slide">
                                <div class="user-flow-image-container">
                                    <img src="images/deck/user-flow/1-user-flow-records-request.png" alt="User Flow Step 1" class="user-flow-image active" data-step="1">
                                </div>
                            </div>
                        `
                    },
                    {
                        title: 'Interaction model',
                        content: `
                            <div class="slide-content user-flow-slide interaction-model-slide">
                                <div class="user-flow-image-container">
                                    <img src="images/deck/interaction-model/1-interaction-model.png" alt="Interaction Model Step 1" class="user-flow-image active" data-step="1">
                                </div>
                            </div>
                        `
                    },
                    {
                        title: 'New request',
                        content: `
                            <div class="slide-content user-flow-slide new-request-slide">
                                <div class="user-flow-image-container">
                                    <img src="images/deck/new-request-empty-v1.png" alt="New Request Empty" class="user-flow-image active" data-step="0">
                                </div>
                            </div>
                        `
                    },
                    {
                        title: 'New request v2/3',
                        content: `
                            <div class="slide-content" style="overflow: auto; padding: 0; aspect-ratio: unset; max-height: none; height: 100%;">
                                <img src="images/deck/new-request-UX.png" alt="New request v2/3" style="width: 2802px; height: 2494px; max-width: none; max-height: none; display: block;">
                            </div>
                        `
                    },
                    {
                        title: 'New provider',
                        content: `
                            <div class="slide-content nerdy-slide">
                                <iframe src="images/deck/new-provider-empty-v1.html" frameborder="0" allowfullscreen class="new-provider-iframe"></iframe>
                            </div>
                        `
                    },
                    {
                        title: 'Providers spreadsheet',
                        content: `
                            <div class="slide-content user-flow-slide provider-contacts-slide">
                                <div class="user-flow-image-container">
                                    <img src="images/deck/providers-spreadsheet.png" alt="Providers Spreadsheet" class="user-flow-image active" data-step="0">
                                </div>
                            </div>
                        `
                    },
                ]
            }
        ];

        // State management
        let currentDeckId = null;
        let currentSlideIndex = 0;
        let isFullscreen = false;

        // DOM elements
        const sidebar = document.getElementById('deck-sidebar');
        const sidebarNav = document.getElementById('sidebar-nav');
        const slideContainer = document.getElementById('slide-container');
        const deckControls = document.getElementById('deck-controls');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const slideCounter = document.getElementById('slide-counter');
        const currentSlideSpan = document.getElementById('current-slide');
        const totalSlidesSpan = document.getElementById('total-slides');
        const deckContainer = document.getElementById('deck-container');

        // Initialize sidebar navigation
        function initSidebar() {
            sidebarNav.innerHTML = '';
            
            decks.forEach(deck => {
                const deckItem = document.createElement('div');
                deckItem.className = 'sidebar-deck';
                deckItem.dataset.deckId = deck.id;
                
                const deckTitle = document.createElement('button');
                deckTitle.className = 'deck-title-btn';
                deckTitle.textContent = deck.title;
                deckTitle.addEventListener('click', () => selectDeck(deck.id));
                
                deckItem.appendChild(deckTitle);
                
                // Skip slide-list-container for Dropbox Replay deck
                if (deck.id !== 'dropbox-replay') {
                    const slideList = document.createElement('div');
                    slideList.className = 'slide-list-container';
                    slideList.style.display = 'none';
                    
                    deck.slides.forEach((slide, index) => {
                        const slideItem = document.createElement('button');
                        slideItem.className = 'slide-item';
                        
                        const slideTitle = document.createElement('span');
                        slideTitle.textContent = slide.title;
                        
                        const slideNumber = document.createElement('span');
                        slideNumber.className = 'slide-number';
                        slideNumber.textContent = `${index + 1}`;
                        
                        slideItem.appendChild(slideTitle);
                        slideItem.appendChild(slideNumber);
                        
                        slideItem.addEventListener('click', () => {
                            selectDeck(deck.id);
                            goToSlide(index);
                        });
                        slideList.appendChild(slideItem);
                    });
                    
                    deckItem.appendChild(slideList);
                }
                
                sidebarNav.appendChild(deckItem);
            });
        }

        // Select a deck
        function selectDeck(deckId) {
            currentDeckId = deckId;
            currentSlideIndex = 0;
            
            const deckMain = document.getElementById('deck-main');
            
            // Add figma-fullscreen class for Dropbox Replay deck
            if (deckId === 'dropbox-replay') {
                deckMain.classList.add('figma-fullscreen');
                // Show navigation controls for Dropbox Replay
                deckControls.style.display = 'flex';
                // Add next case study button
                addNextCaseStudyButton();
            } else {
                deckMain.classList.remove('figma-fullscreen');
                // Show navigation controls for other decks
                deckControls.style.display = 'flex';
                // Remove next case study button if it exists
                removeNextCaseStudyButton();
                // Clean up any iframe that might be in deck-main when switching away from Dropbox Replay
                const existingIframe = deckMain.querySelector('iframe');
                if (existingIframe) {
                    existingIframe.remove();
                }
            }
            
            // Update sidebar UI
            document.querySelectorAll('.sidebar-deck').forEach(item => {
                const slideList = item.querySelector('.slide-list-container');
                if (item.dataset.deckId === deckId) {
                    item.classList.add('active');
                    if (slideList) {
                        slideList.style.display = 'block';
                    }
                } else {
                    item.classList.remove('active');
                    if (slideList) {
                        slideList.style.display = 'none';
                    }
                }
            });
            
            // Update active slide indicators
            updateSlideIndicators();
            
            // Render current slide
            renderSlide();
            
            // Update URL
            updateURL();
        }

        // Add next case study button for Dropbox Replay deck
        function addNextCaseStudyButton() {
            const deckMain = document.getElementById('deck-main');
            // Remove existing button if it exists
            removeNextCaseStudyButton();
            
            // Check if there's a next deck
            const currentDeckIndex = decks.findIndex(d => d.id === currentDeckId);
            if (currentDeckIndex >= decks.length - 1) {
                return; // No next deck available
            }
            
            const button = document.createElement('button');
            button.id = 'next-case-study-btn';
            button.className = 'next-case-study-btn';
            button.textContent = 'Next case study ->';
            button.setAttribute('aria-label', 'Navigate to next case study');
            
            button.addEventListener('click', () => {
                const nextDeck = decks[currentDeckIndex + 1];
                if (nextDeck) {
                    selectDeck(nextDeck.id);
                    goToSlide(0);
                }
            });
            
            deckMain.appendChild(button);
        }

        // Remove next case study button
        function removeNextCaseStudyButton() {
            const button = document.getElementById('next-case-study-btn');
            if (button) {
                button.remove();
            }
        }

        // Render current slide
        function renderSlide() {
            if (!currentDeckId) return;
            
            const deck = decks.find(d => d.id === currentDeckId);
            if (!deck || !deck.slides[currentSlideIndex]) return;
            
            const slide = deck.slides[currentSlideIndex];
            
            // For Dropbox Replay deck, render iframe directly in deck-main
            if (currentDeckId === 'dropbox-replay') {
                slideContainer.innerHTML = '';
                const deckMain = document.getElementById('deck-main');
                // Remove any existing iframe
                const existingIframe = deckMain.querySelector('iframe');
                if (existingIframe) {
                    existingIframe.remove();
                }
                // Create and append iframe directly to deck-main
                const iframe = document.createElement('iframe');
                iframe.style.width = '100%';
                iframe.style.height = '100%';
                iframe.style.border = '0';
                iframe.setAttribute('allowfullscreen', '');
                iframe.src = 'https://www.figma.com/embed?embed_host=share&url=https://www.figma.com/proto/K0YaaAOtqvCgeLE9Vulmtn/Jason-McCoy?page-id=49723%3A18804&node-id=55692-26697&p=f&viewport=25259%2C6836%2C0.25&t=qK23kmNYg5ClZrSs-1&scaling=min-zoom&scaling=scale-down&content-scaling=responsive&starting-point-node-id=55692%3A26697&hide-ui=1';
                deckMain.appendChild(iframe);
                return;
            }
            
            // Normal slide rendering for other decks
            slideContainer.innerHTML = slide.content;
            
            // Set up click handler for Casey slide
            const caseySlide = slideContainer.querySelector('.casey-slide');
            if (caseySlide) {
                caseySlide.addEventListener('click', function() {
                    caseySlide.classList.add('animate-toast');
                });
            }
            
            // Set up click handler for buyer-user slide
            const buyerUserSlide = slideContainer.querySelector('.buyer-user-slide');
            if (buyerUserSlide) {
                let clickCount = 0;
                
                buyerUserSlide.addEventListener('click', function() {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        // First click: show full-service heading and card group
                        const fullServiceHeading = buyerUserSlide.querySelector('.buyer-user-heading.full-service');
                        const fullServiceCardGroup = buyerUserSlide.querySelector('.buyer-user-card-group.full-service');
                        
                        if (fullServiceHeading) {
                            fullServiceHeading.style.opacity = '1';
                        }
                        if (fullServiceCardGroup) {
                            fullServiceCardGroup.style.opacity = '1';
                        }
                    } else if (clickCount === 2) {
                        // Second click: show footer
                        const footer = buyerUserSlide.querySelector('.buyer-user-footer');
                        if (footer) {
                            footer.style.opacity = '1';
                        }
                    }
                });
            }
            
            // Set up progressive image reveal for user flow slide
            const userFlowSlide = slideContainer.querySelector('.user-flow-slide');
            if (userFlowSlide) {
                // Skip if this is a provider-contacts-slide, interaction-model-slide, simple-request-flow-slide, or copilot-alpha-slide (they have their own handlers)
                const isProviderContactsSlide = userFlowSlide.classList.contains('provider-contacts-slide');
                const isInteractionModelSlide = userFlowSlide.classList.contains('interaction-model-slide');
                const isSimpleRequestFlowSlide = userFlowSlide.classList.contains('simple-request-flow-slide');
                const isCopilotAlphaSlide = userFlowSlide.classList.contains('copilot-alpha-slide');
                if (isProviderContactsSlide || isInteractionModelSlide || isSimpleRequestFlowSlide || isCopilotAlphaSlide) {
                    // Don't set up user-flow handler for these slides
                } else {
                    const imageContainer = userFlowSlide.querySelector('.user-flow-image-container');
                    const currentImage = imageContainer.querySelector('.user-flow-image');
                    
                    // Detect slide type based on initial image src or class
                    const isNewRequestSlide = userFlowSlide.classList.contains('new-request-slide');
                const maxImages = isNewRequestSlide ? 13 : 20; // New request has 13 images, user-flow has 20
                let currentImageIndex = isNewRequestSlide ? 0 : 1; // New request starts at 0 (new-request-empty-v1.png), user-flow starts at 1
                let isScrolling = false;
                
                if (isNewRequestSlide) {
                    // New request slide - start with new-request-empty-v1.png, click to advance
                    // Reset to first image (new-request-empty-v1.png)
                    if (currentImage) {
                        currentImage.src = 'images/deck/new-request-empty-v1.png';
                        currentImage.dataset.step = '0';
                        currentImage.classList.add('active');
                    }
                    // Scroll to top when slide loads
                    setTimeout(function() {
                        userFlowSlide.scrollTop = 0;
                    }, 0);
                } else {
                    // Reset to first image for user-flow slide
                    if (currentImage) {
                        currentImage.src = 'images/deck/user-flow/1-user-flow-records-request.png';
                        currentImage.dataset.step = '1';
                        currentImage.classList.add('active');
                    }
                }
                
                // Track scrolling to prevent click during scroll
                userFlowSlide.addEventListener('scroll', function() {
                    isScrolling = true;
                    clearTimeout(userFlowSlide.scrollTimeout);
                    userFlowSlide.scrollTimeout = setTimeout(function() {
                        isScrolling = false;
                    }, 150);
                });
                
                // Click handler for both slide types
                userFlowSlide.addEventListener('click', function(e) {
                    // Don't advance if user is scrolling
                    if (isScrolling) {
                        return;
                    }
                    
                    if (currentImageIndex < maxImages) {
                        if (isNewRequestSlide) {
                            // New request slide - vertical scrolling, simple increment
                            // Preserve scroll position when advancing
                            const scrollTop = userFlowSlide.scrollTop;
                            
                            const currentImage = imageContainer.querySelector('.user-flow-image');
                            let imagePath;
                            
                            if (currentImageIndex === 0) {
                                // First click: advance from new-request-empty-v1.png to first new-request image
                                currentImageIndex = 1;
                                imagePath = 'images/deck/new-request/1-new-request-empty-v1.png';
                            } else {
                                // Subsequent clicks: continue through new-request images
                                currentImageIndex++;
                                imagePath = `images/deck/new-request/${currentImageIndex}-new-request-empty-v1.png`;
                            }
                            
                            if (currentImage) {
                                // Remove previous onload handler if any
                                const previousOnload = currentImage.onload;
                                currentImage.onload = null;
                                
                                currentImage.src = imagePath;
                                currentImage.dataset.step = currentImageIndex.toString();
                                
                                // Restore scroll position after image loads (or immediately if cached)
                                const restoreScroll = function() {
                                    userFlowSlide.scrollTop = scrollTop;
                                };
                                
                                if (currentImage.complete) {
                                    // Image is already cached, restore scroll position immediately
                                    setTimeout(restoreScroll, 0);
                                } else {
                                    // Wait for image to load, then restore scroll position
                                    currentImage.onload = restoreScroll;
                                }
                            }
                        } else {
                            // User flow slide - horizontal scrolling
                            // Save current scroll position
                            const scrollLeft = userFlowSlide.scrollLeft;
                            
                            // Skip image 4 (duplicate) - go from 3 to 5
                            if (currentImageIndex === 3) {
                                currentImageIndex = 5;
                            } else {
                                currentImageIndex++;
                            }
                            
                            const imagePath = `images/deck/user-flow/${currentImageIndex}-user-flow-records-request.png`;
                            const currentImage = imageContainer.querySelector('.user-flow-image');
                            if (currentImage) {
                                // Remove previous onload handler if any
                                const previousOnload = currentImage.onload;
                                currentImage.onload = null;
                                
                                currentImage.src = imagePath;
                                currentImage.dataset.step = currentImageIndex.toString();
                                
                                // Restore scroll position after image loads (or immediately if cached)
                                const restoreScroll = function() {
                                    userFlowSlide.scrollLeft = scrollLeft;
                                };
                                
                                if (currentImage.complete) {
                                    // Image is already cached, restore immediately
                                    setTimeout(restoreScroll, 0);
                                } else {
                                    // Wait for image to load
                                    currentImage.onload = restoreScroll;
                                }
                            }
                        }
                    }
                });
                }
            }
            
            // Set up progressive image reveal for provider contacts slide
            const providerContactsSlide = slideContainer.querySelector('.provider-contacts-slide');
            if (providerContactsSlide) {
                const imageContainer = providerContactsSlide.querySelector('.user-flow-image-container');
                const currentImage = imageContainer.querySelector('.user-flow-image');
                
                const maxImages = 7; // 1-provider-contacts.png through 7-provider-contacts.png
                let currentImageIndex = 0; // Start at 0 (providers-spreadsheet.png)
                
                // Reset to first image when slide loads
                if (currentImage) {
                    currentImage.src = 'images/deck/providers-spreadsheet.png';
                    currentImage.dataset.step = '0';
                    currentImage.classList.add('active');
                }
                
                // Click handler
                providerContactsSlide.addEventListener('click', function(e) {
                    // Stop propagation to prevent other handlers from running
                    e.stopPropagation();
                    
                    if (currentImageIndex < maxImages) {
                        currentImageIndex++;
                        const imagePath = `images/deck/provider-contacts/${currentImageIndex}-provider-contacts.png`;
                        
                        if (currentImage) {
                            currentImage.src = imagePath;
                            currentImage.dataset.step = currentImageIndex.toString();
                        }
                    }
                    // When currentImageIndex reaches maxImages (7), no more images will load
                });
            }
            
            // Set up progressive image reveal for interaction model slide
            const interactionModelSlide = slideContainer.querySelector('.interaction-model-slide');
            if (interactionModelSlide) {
                const imageContainer = interactionModelSlide.querySelector('.user-flow-image-container');
                const currentImage = imageContainer.querySelector('.user-flow-image');
                
                const maxImages = 5; // 1-interaction-model.png through 5-interaction-model.png
                let currentImageIndex = 1; // Start at 1 (1-interaction-model.png)
                
                // Reset to first image when slide loads
                if (currentImage) {
                    currentImage.src = 'images/deck/interaction-model/1-interaction-model.png';
                    currentImage.dataset.step = '1';
                    currentImage.classList.add('active');
                }
                
                // Click handler
                interactionModelSlide.addEventListener('click', function(e) {
                    // Stop propagation to prevent other handlers from running
                    e.stopPropagation();
                    
                    if (currentImageIndex < maxImages) {
                        currentImageIndex++;
                        const imagePath = `images/deck/interaction-model/${currentImageIndex}-interaction-model.png`;
                        
                        if (currentImage) {
                            currentImage.src = imagePath;
                            currentImage.dataset.step = currentImageIndex.toString();
                        }
                    }
                    // When currentImageIndex reaches maxImages (5), no more images will load
                });
            }
            
            // Set up progressive image reveal for simple request flow slide
            const simpleRequestFlowSlide = slideContainer.querySelector('.simple-request-flow-slide');
            if (simpleRequestFlowSlide) {
                const imageContainer = simpleRequestFlowSlide.querySelector('.user-flow-image-container');
                const currentImage = imageContainer.querySelector('.user-flow-image');
                
                const maxImages = 7; // 1-simplified-request-flow.png through 7-simplified-request-flow.png
                let currentImageIndex = 1; // Start at 1 (1-simplified-request-flow.png)
                
                // Reset to first image when slide loads
                if (currentImage) {
                    currentImage.src = 'images/deck/simple-request-flow/1-simplified-request-flow.png';
                    currentImage.dataset.step = '1';
                    currentImage.classList.add('active');
                }
                
                // Click handler
                simpleRequestFlowSlide.addEventListener('click', function(e) {
                    // Stop propagation to prevent other handlers from running
                    e.stopPropagation();
                    
                    if (currentImageIndex < maxImages) {
                        currentImageIndex++;
                        const imagePath = `images/deck/simple-request-flow/${currentImageIndex}-simplified-request-flow.png`;
                        
                        if (currentImage) {
                            currentImage.src = imagePath;
                            currentImage.dataset.step = currentImageIndex.toString();
                        }
                    }
                    // When currentImageIndex reaches maxImages (7), no more images will load
                });
            }
            
            // Set up progressive image reveal for copilot alpha slide
            const copilotAlphaSlide = slideContainer.querySelector('.copilot-alpha-slide');
            if (copilotAlphaSlide) {
                const imageContainer = copilotAlphaSlide.querySelector('.user-flow-image-container');
                const currentImage = imageContainer.querySelector('.user-flow-image');
                
                const maxImages = 2; // 1-og-nerdy-copilot-collapsed.png through 2-og-nerdy-copilot-expanded.png
                let currentImageIndex = 1; // Start at 1 (1-og-nerdy-copilot-collapsed.png)
                
                // Reset to first image when slide loads
                if (currentImage) {
                    currentImage.src = 'images/deck/nerdy-ai/1-og-nerdy-copilot-collapsed.png';
                    currentImage.dataset.step = '1';
                    currentImage.classList.add('active');
                }
                
                // Click handler
                copilotAlphaSlide.addEventListener('click', function(e) {
                    // Stop propagation to prevent other handlers from running
                    e.stopPropagation();
                    
                    if (currentImageIndex < maxImages) {
                        currentImageIndex++;
                        const imagePath = `images/deck/nerdy-ai/${currentImageIndex}-og-nerdy-copilot-expanded.png`;
                        
                        if (currentImage) {
                            currentImage.src = imagePath;
                            currentImage.dataset.step = currentImageIndex.toString();
                        }
                    }
                    // When currentImageIndex reaches maxImages (2), no more images will load
                });
            }
            
            // Update slide indicators in sidebar
            document.querySelectorAll('.sidebar-deck').forEach(deckItem => {
                const slideList = deckItem.querySelector('.slide-list-container');
                if (deckItem.dataset.deckId === currentDeckId) {
                    // This is the active deck - update its slide items
                    if (slideList) {
                        const slideItems = slideList.querySelectorAll('.slide-item');
                        slideItems.forEach((item, index) => {
                            if (index === currentSlideIndex) {
                                item.classList.add('active');
                            } else {
                                item.classList.remove('active');
                            }
                        });
                    }
                } else {
                    // Remove active class from all slide items in other decks
                    if (slideList) {
                        const slideItems = slideList.querySelectorAll('.slide-item');
                        slideItems.forEach(item => {
                            item.classList.remove('active');
                        });
                    }
                }
            });
        }

        // Update slide indicators
        function updateSlideIndicators() {
            if (!currentDeckId) {
                currentSlideSpan.textContent = '0';
                totalSlidesSpan.textContent = '0';
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                return;
            }
            
            const deck = decks.find(d => d.id === currentDeckId);
            if (deck) {
                currentSlideSpan.textContent = currentSlideIndex + 1;
                totalSlidesSpan.textContent = deck.slides.length;
                
                // Update button states
                const currentDeckIndex = decks.findIndex(d => d.id === currentDeckId);
                const isFirstSlide = currentSlideIndex === 0;
                const isLastSlide = currentSlideIndex === deck.slides.length - 1;
                const hasPrevDeck = currentDeckIndex > 0;
                const hasNextDeck = currentDeckIndex < decks.length - 1;
                
                // Disable prev button only if on first slide AND no previous deck
                prevBtn.disabled = isFirstSlide && !hasPrevDeck;
                
                // Disable next button only if on last slide AND no next deck
                nextBtn.disabled = isLastSlide && !hasNextDeck;
            }
        }

        // Navigate to specific slide
        function goToSlide(index) {
            if (!currentDeckId) return;
            
            const deck = decks.find(d => d.id === currentDeckId);
            if (!deck) return;
            
            if (index >= 0 && index < deck.slides.length) {
                currentSlideIndex = index;
                renderSlide();
                updateSlideIndicators();
                updateURL();
            }
        }

        // Previous slide
        function prevSlide() {
            if (!currentDeckId) return;
            
            const deck = decks.find(d => d.id === currentDeckId);
            if (!deck) return;
            
            if (currentSlideIndex > 0) {
                goToSlide(currentSlideIndex - 1);
            } else {
                // On first slide - navigate to previous deck's last slide
                const currentDeckIndex = decks.findIndex(d => d.id === currentDeckId);
                if (currentDeckIndex > 0) {
                    const prevDeck = decks[currentDeckIndex - 1];
                    selectDeck(prevDeck.id);
                    goToSlide(prevDeck.slides.length - 1);
                }
            }
        }

        // Next slide
        function nextSlide() {
            if (!currentDeckId) return;
            
            const deck = decks.find(d => d.id === currentDeckId);
            if (!deck) return;
            
            if (currentSlideIndex < deck.slides.length - 1) {
                goToSlide(currentSlideIndex + 1);
            } else {
                // On last slide - navigate to next deck's first slide
                const currentDeckIndex = decks.findIndex(d => d.id === currentDeckId);
                if (currentDeckIndex < decks.length - 1) {
                    const nextDeck = decks[currentDeckIndex + 1];
                    selectDeck(nextDeck.id);
                    goToSlide(0);
                }
            }
        }

        // Toggle fullscreen
        function toggleFullscreen() {
            if (!isFullscreen) {
                // Enter fullscreen
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen();
                } else if (document.documentElement.webkitRequestFullscreen) {
                    document.documentElement.webkitRequestFullscreen();
                } else if (document.documentElement.msRequestFullscreen) {
                    document.documentElement.msRequestFullscreen();
                }
            } else {
                // Exit fullscreen
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }

        // Handle fullscreen change
        function handleFullscreenChange() {
            isFullscreen = !!(
                document.fullscreenElement ||
                document.webkitFullscreenElement ||
                document.msFullscreenElement
            );
            
            if (isFullscreen) {
                deckContainer.classList.add('fullscreen');
                fullscreenBtn.querySelector('.fullscreen-icon').style.display = 'none';
                fullscreenBtn.querySelector('.exit-fullscreen-icon').style.display = 'block';
            } else {
                deckContainer.classList.remove('fullscreen');
                fullscreenBtn.querySelector('.fullscreen-icon').style.display = 'block';
                fullscreenBtn.querySelector('.exit-fullscreen-icon').style.display = 'none';
            }
        }

        // Update URL hash
        function updateURL() {
            if (currentDeckId !== null) {
                const hash = `#${currentDeckId}/${currentSlideIndex}`;
                if (window.location.hash !== hash) {
                    window.history.replaceState(null, null, hash);
                }
            }
        }

        // Restore state from URL
        function restoreStateFromURL() {
            const hash = window.location.hash.slice(1);
            if (hash) {
                const parts = hash.split('/');
                if (parts.length >= 1) {
                    const deckId = parts[0];
                    const deck = decks.find(d => d.id === deckId);
                    if (deck) {
                        selectDeck(deckId);
                        if (parts.length >= 2) {
                            const slideIndex = parseInt(parts[1], 10);
                            if (!isNaN(slideIndex) && slideIndex >= 0 && slideIndex < deck.slides.length) {
                                goToSlide(slideIndex);
                            }
                        }
                        return;
                    }
                }
            }
            
            // Default to first deck
            if (decks.length > 0) {
                selectDeck(decks[0].id);
            }
        }

        // Event listeners
        prevBtn.addEventListener('click', prevSlide);
        nextBtn.addEventListener('click', nextSlide);
        fullscreenBtn.addEventListener('click', toggleFullscreen);

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
            
            switch(e.key) {
                case 'ArrowLeft':
                    e.preventDefault();
                    prevSlide();
                    break;
                case 'ArrowRight':
                case ' ':
                    e.preventDefault();
                    nextSlide();
                    break;
                case 'f':
                case 'F':
                    e.preventDefault();
                    toggleFullscreen();
                    break;
                case 'Escape':
                    if (isFullscreen) {
                        e.preventDefault();
                        toggleFullscreen();
                    }
                    break;
            }
        });

        // Fullscreen change events
        document.addEventListener('fullscreenchange', handleFullscreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
        document.addEventListener('msfullscreenchange', handleFullscreenChange);

        // Show construction modal on page load
        const constructionModal = document.getElementById('construction-modal');
        const dismissBtn = document.getElementById('modal-dismiss-btn');
        
        if (constructionModal) {
            // Show modal after a brief delay to ensure it renders properly
            setTimeout(() => {
                constructionModal.classList.add('show');
            }, 100);
        }
        
        // Dismiss modal when button is clicked
        if (dismissBtn) {
            dismissBtn.addEventListener('click', () => {
                constructionModal.classList.remove('show');
            });
        }

        // Initialize
        initSidebar();
        restoreStateFromURL();
    </script>
</body>
</html>

